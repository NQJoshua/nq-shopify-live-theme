{% comment %} Price to show. {% endcomment %}
{% assign sale_on = false %}
{% if product.selected_or_first_available_variant.compare_at_price > product.selected_or_first_available_variant.price %}
  {% assign sale_on = true %}
{% endif %}

{% comment %} Main Image URL. {% endcomment %}
{% assign main_url_image = product.featured_image %}

{% assign hover_url_image = "" %}
{% if product.images[1] %}
	{% assign hover_url_image = product.images[1].src %}
{% else %}
	{% assign hover_url_image = product.images[0].src %}
{% endif %}

{% comment %}
	date_difference = 60 * 60 * 24 * day counter, this is new product period in seconds
{% endcomment %}
 	{% assign date_now = 'now' | date: "%s" %}
 	{% assign date_published = product.published_at | date: "%s" %}
	{% assign date_difference = date_now | minus: date_published %}
	{% assign date_limit = 86400 | times: settings.new_product_period %}
	{% assign pr_variant = product.selected_or_first_available_variant %}
	{% assign pr_variant = pr_variant.id %}
	{% assign pr_variant_name = "" %}

	{% if product.handle == "wrist-wraps-14-inches" and collection.handle == '4th-july-1' %}
        {% assign pr_variant = 40323227732 %}
    {% elsif product.handle == "wrist-wraps-14-inches" and collection.handle == '4th-july-2' %}
        {% assign pr_variant = 40323227348 %}
    {% elsif product.handle == "wrist-wraps-14-inches" and collection.handle == '4th-july-3' %}
        {% assign pr_variant = 40323227092 %}
    {% elsif product.handle == "wrist-wraps-14-inches" and collection.handle == '4th-july-4' %}
        {% assign pr_variant = 40323227156 %}
    {% elsif product.handle == "super-heavy-duty-wrist-wraps-24-inches" and collection.handle == '4th-july-5' %}
        {% assign pr_variant = 40323225876 %}
    {% elsif product.handle == "wrist-wraps-and-lifting-straps-bundle" and collection.handle == '4th-july-5' %}
        {% assign pr_variant = 40323226772 %}
    {% elsif product.handle == "wrist-wraps-and-lifting-straps-bundle" and collection.handle == '4th-july-6' %}
        {% assign pr_variant = 40323226644 %}
    {% elsif product.handle == "cross-training-wrist-wraps-32-inches" and collection.handle == '4th-july-7' %}
        {% assign pr_variant = 40323315220 %}
    {% elsif product.handle == "cross-training-wrist-wraps-32-inches" and collection.handle == '4th-july-8' %}
        {% assign pr_variant = 40323315156 %}
    {% elsif product.handle == "powerlifting-shoes-megin" and collection.handle == '4th-july-9' %}
        {% assign pr_variant = 40323225428 %}
    {% elsif product.handle == "weightlifting-shoes-venja" and collection.handle == '4th-july-9' %}
        {% assign pr_variant = 40323224404 %}
    {% elsif product.handle == "weightlifting-gloves-with-wrist-support" and collection.handle == '4th-july-10' %}
        {% assign pr_variant = 40295154580 %}
    {% elsif product.handle == "weightlifting-gloves-with-wrist-support" and collection.handle == '4th-july-11' %}
        {% assign pr_variant = 40295155540 %}
    {% endif %}
	
	{% comment %}{% if product.handle == "weightlifting-gloves-with-wrist-support" and collection.handle == 'january-sale-1' %}
		{% assign pr_variant_name = "weightlifting-gloves" %}
	{% elsif product.handle == "knee-sleeves-7mm" and collection.handle == 'january-sale-1' %}
		{% assign pr_variant_name = "knee-sleeves-pink" %}
	{% endif %}{% endcomment %}

<!-- product -->
<div class="product wvariant{% if hoverzoom %} product--zoom{% endif %}{% if smallproduct %} smallproduct{% endif %} {{ pr_variant }} {{ pr_variant_name }}{% unless product.available %} sold-out{% endunless %}">
  {% if product.available %}
      {%comment%}{% if product.variants.size > 1 %}
          {% assign func = "" %}
      {% else %}
          {% assign func = "Shopify.addItem(" | append: pr_variant | append: ", 1)" %}
      {% endif %}{% endcomment %}
  
  		 {% assign func = "Shopify.addItem(" | append: pr_variant | append: ", 1)" %}
  {% endif %}  
  
  <div class="product__inside">
    <!-- product image -->
    <div class="product__inside__image">

      {% if product.images.size > 1 and product.description contains "[item-gallery]" %}
      <div class="product__inside__carousel slide" data-ride="carousel">
        <div class="carousel-inner" role="listbox">
          {% for image in product.images %}
          <div class="item{% if forloop.first %} active{% endif %}">
            <a href="{{ product.url | within: collection | append: '?variant=' }}{{ pr_variant }}"><img src="{{ image | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}"></a>
          </div>
          {% endfor %}
        </div>
        <!-- Controls --> 
        <a class="carousel-control next"></a> <a class="carousel-control prev"></a> 
      </div>
      {% else %}
      <a href="{{ product.url }}?variant={{ pr_variant }}">
		{% comment %}<img src="{{ main_url_image | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}"/> {% endcomment %}
        {% if product.handle == "wrist-wraps-14-inches" and collection.handle == '4th-july-1' %}
            <img src="{{ product.images[125] | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
        {% elsif product.handle == "wrist-wraps-14-inches" and collection.handle == '4th-july-2' %}
            <img src="{{ product.images[3] | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
        {% elsif product.handle == "wrist-wraps-14-inches" and collection.handle == '4th-july-3' %}
            <img src="{{ product.images[49] | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
        {% elsif product.handle == "wrist-wraps-14-inches" and collection.handle == '4th-july-4' %}
            <img src="{{ product.images[41] | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
        {% elsif product.handle == "super-heavy-duty-wrist-wraps-24-inches" and collection.handle == '4th-july-5' %}
            <img src="{{ product.images[5] | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
        {% elsif product.handle == "wrist-wraps-and-lifting-straps-bundle" and collection.handle == '4th-july-5' %}
            <img src="{{ product.images[0] | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
        {% elsif product.handle == "wrist-wraps-and-lifting-straps-bundle" and collection.handle == '4th-july-6' %}
            <img src="{{ product.images[6] | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
        {% elsif product.handle == "cross-training-wrist-wraps-32-inches" and collection.handle == '4th-july-7' %}
            <img src="{{ product.images[19] | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
        {% elsif product.handle == "cross-training-wrist-wraps-32-inches" and collection.handle == '4th-july-8' %}
            <img src="{{ product.images[4] | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
        {% elsif product.handle == "powerlifting-shoes-megin" and collection.handle == '4th-july-9' %}
            <img src="{{ product.images[4] | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
        {% elsif product.handle == "weightlifting-shoes-venja" and collection.handle == '4th-july-9' %}
            <img src="{{ product.images[4] | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
        {% elsif product.handle == "weightlifting-gloves-with-wrist-support" and collection.handle == '4th-july-10' %}
            <img src="{{ product.images[9] | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
        {% elsif product.handle == "weightlifting-gloves-with-wrist-support" and collection.handle == '4th-july-11' %}
            <img src="{{ product.images[40] | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
        {% else %}
        	<img src="{{ main_url_image | product_img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}"/>
        {% endif %}
      </a>
      {% endif %}
      
      {% unless product.available %}
      <div class="product__label--sold-out"><span>{{ "products.product.sold_out" | t }}</span></div>
      {% else %}

     {% comment %} {% if settings.product_item_showqv %}<a href="javascript:void(0);" onclick="quiqview('{{ product.handle | handleize }}')" class="quick-view"><b><span class="icon icon-visibility"></span> {{ "products.general.quick_view" | t }}</b></a>{% endif %} {% endcomment %}
      {% endunless %}
      
      {% if product.description contains '[countdown]' and product.available %}
        {% assign countdown = product.content | split: '[/countdown]' | first %}
        {% assign countdown = countdown | split: '[countdown]' | last %}
        {% assign date = countdown | split: ' ' | first | split: '/' %}
        {% assign time = countdown | split: ' ' | last | split: ':' %}
        <div class="countdown_box">
          <div class="countdown_inner">
            <div id="{{ product.id }}{{ productCount }}"></div>
          </div>
        </div>
        <script>
          jQuery(function ($) {
              // countdown ini
              var yyyy = {{ date[0] }};
              var mm = {{ date[1] | minus:1 }};
              var dd = {{ date[2] }};
              var hour = {{ time[0] }};
              var min = {{ time[1] }};
              var sec = {{ time[2] }};

              var sH = {{'now' | date: "%H" }};//s = shopify
              var sD = {{'now' | date: "%-d" }};
              var sM = {{'now' | date: "%m" }};
              var sY = {{'now' | date: "%Y" }};

              var qH = new Date();
              var qD = qH.getDate();//q = jQuery
              var qM = qH.getMonth() + 1;
              var qY = qH.getFullYear();
              var qH = qH.getHours();

              if(qD > sD) {
                qH += 24;
              }
              else {
                if(qD < sD) {
                  if(qM > sM) {
                    qH += 24;
                  }
                  else {
                    if(qY > sY) {
                      qH += 24;
                    }
                    else {
                      sH += 24;
                    }
                  }
                }
              }

              var fH = sH - qH;

              if ($("#{{ product.id }}{{ productCount }}").length > 0){$('#{{ product.id }}{{ productCount }}').countdown({until: new Date(yyyy, mm, dd, hour, min, sec), timezone: fH});}
          });
        </script>
      {% endif %}
    </div>
    <!-- /product image --> 
    <!-- label news -->
      {% if product.description contains '[icon-new-always]' %}
		<div class="product__label product__label--right product__label--new"><span>{{ 'products.general.new' | t }}</span></div>
      {% else %}
        {% unless product.description contains '[disable-icon-new]' %}
          {% if date_difference < date_limit %}
			<div class="product__label product__label--right product__label--new"><span>{{ 'products.general.new' | t }}</span></div>
          {% endif %}
        {% endunless %}
      {% endif %}
    <!-- /label news --> 
    <!-- label sale -->
      {% unless product.description contains '[disable-icon-sale]' %}
        {% if sale_on %}
		  <div class="product__label product__label--left product__label--sale {{product.handle}}"><span>{{ 'products.general.sale' | t }}<br>
		  -{{ product.selected_or_first_available_variant.compare_at_price | minus: product.selected_or_first_available_variant.price | times: 100.0 | divided_by: product.selected_or_first_available_variant.compare_at_price | money_without_currency | replace: ',', '.' | times: 100 | remove: '.0'}}%</span></div>
        {% endif %}
      {% endunless %}
    <!-- /label sale --> 
    <!-- product name -->
    <div class="product__inside__name">
      <h2 class="product_title">
        <a href="{{ product.url | within: collection }}">
          {% if product.handle == "wrist-wraps-14-inches" and collection.handle == '4th-july-1' %}
          	WRIST WRAPS (14") - 1-PACK / RED
          {% elsif product.handle == "wrist-wraps-14-inches" and collection.handle == '4th-july-2' %}
          	WRIST WRAPS (14") - 1-PACK / AQUA BLUE
          {% elsif product.handle == "wrist-wraps-14-inches" and collection.handle == '4th-july-3' %}
          	WRIST WRAPS (14") - 1-PACK / FLAMES
          {% elsif product.handle == "wrist-wraps-14-inches" and collection.handle == '4th-july-4' %}
          	WRIST WRAPS (14") - 1-PACK / CAMO RED
          {% elsif product.handle == "wrist-wraps-14-inches" and collection.handle == 'january-sale-5' %}
          	WRIST WRAPS (14") - 1-PACK / FLAMES
          {% elsif product.handle == "super-heavy-duty-wrist-wraps-24-inches" and collection.handle == '4th-july-5' %}
              SUPER HEAVY DUTY WRIST WRAPS (24") BLUE
          {% elsif product.handle == "wrist-wraps-and-lifting-straps-bundle" and collection.handle == '4th-july-5' %}
              WRIST WRAPS & LIFTING STRAPS BUNDLE AQUA BLUE
          {% elsif product.handle == "wrist-wraps-and-lifting-straps-bundle" and collection.handle == '4th-july-6' %}
              WRIST WRAPS & LIFTING STRAPS BUNDLE RED
          {% elsif product.handle == "cross-training-wrist-wraps-32-inches" and collection.handle == '4th-july-7' %}
              CROSS TRAINING WRIST WRAPS (32") RED
          {% elsif product.handle == "cross-training-wrist-wraps-32-inches" and collection.handle == '4th-july-8' %}
              CROSS TRAINING WRIST WRAPS (32") AQUA BLUE
          {% elsif product.handle == "powerlifting-shoes-megin" and collection.handle == '4th-july-9' %}
              POWERLIFTING SHOES - MEGIN BLUE
          {% elsif product.handle == "weightlifting-shoes-venja" and collection.handle == '4th-july-9' %}
              WEIGHTLIFTING SHOES - VENJA WHITE
          {% elsif product.handle == "weightlifting-gloves-with-wrist-support" and collection.handle == '4th-july-10' %}
              WEIGHTLIFTING GLOVES WITH 12" WRIST SUPPORT BLUE
          {% elsif product.handle == "weightlifting-gloves-with-wrist-support" and collection.handle == '4th-july-11' %}
              WEIGHTLIFTING GLOVES WITH 12" WRIST SUPPORT RED
          {% else %}
          	{{ product.title }}
          {% endif %}
        </a>
      </h2>
    </div>
    <!-- /product name --> 
    <!-- product description --> 
    <!-- visible only in row-view mode -->
    <div class="product__inside__description row-mode-visible">{% include "get-content-with-key" content: product.content key: "[smallDescription]" %}</div>
    <!-- /product description --> 
    <!-- product price -->
    {% if sale_on %}
    	<div class="product__inside__price price-box">{{ product.selected_or_first_available_variant.price | money }}<span class="price-box__old">{{ product.selected_or_first_available_variant.compare_at_price | money }}</span></div>
    {% else %}
    	<div class="product__inside__price price-box baseprice">{{ product.selected_or_first_available_variant.price | money }}</div>
    {% endif %}

    <!-- /product price --> 
    <!-- product review --> 
    <!-- visible only in row-view mode -->
    {% if settings.product_item_show_rating %}<div class="product__inside__review row-mode-visible">
      <div class="rating row-mode-visible"><span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span></div>
    </div>{% endif %}
    <!-- /product review --> 
    <div class="product__inside__hover">
      <!-- product info -->
      <div class="product__inside__info">
        {% if product.available %}
        {% if product.handle == 'elbow-sleeves-5mm' or product.handle == 'knee-compression-sleeves' or product.handle == 'ankle-compression-sleeves' or product.handle == 'weightlifting-shoes-venja' or product.handle == 'kinesiology-tape-primetape' or product.handle == 'chalk-ball' or product.handle == 'knee-sleeves-7mm' or product.handle == 'weightlifting-gloves-with-wrist-support' %}
          
        	<!--variant options -->
          {% capture gallery_check %}{% if product.description contains "[item-gallery]" %}true{% else %}false{% endif %}{% endcapture %}
          {% if settings.show_product_options and product.options.size < 3 %}{% assign colorindex = -1 %}{% assign sizeindex = -1 %}

          {% if product.options.size > 0 and product.variants.size > 1 %}{% for option in product.options %}
          {% assign downcased_option = option | downcase %}
          {% if downcased_option contains 'color' or downcased_option contains 'colour' %}
        	{% assign colorindex = forloop.index0 %}
          {% else %}
        	{% assign sizeindex = forloop.index0 %}
          {% endif %}
          {% endfor %}{% endif %}

          {%comment%}CUSTOM CODE{%endcomment%}
          {% if product.handle == 'kinesiology-tape-2-pack' %}
          {% assign colorindex = 1 %}
          {% endif %}
          

          {% if colorindex > -1 %}
          {% include 'swatch' with 'Color' %}
          {% assign check = "" %}
          <ul class="options-swatch options-swatch--color productitem-color-js">
            {% assign images_color = '' %}{% for i in (1..10) %}{% assign key = 'filter_color' | append: forloop.index %}{% assign value = '__' | append: settings[key] | handle | downcase | strip | append: '__' | append: forloop.index %}{% assign images_color = images_color | append: value | append: ';' %}{% endfor %}
            {% assign allvariants = '' %}

            {% for variant in product.variants %}
            {%- include 'bold-variant' with variant, hide_action: 'skip' -%}
            {% assign value = variant.options[colorindex] | remove: csp_flag_string %}
            {%comment%} {% unless variant.available %}{% continue %}{% endunless %}{%endcomment%}

            {% assign tag = variant.options[colorindex] | remove: csp_flag_string %}

            {% if allvariants contains value %}
            {% else %}
            <li>
              <a href="#" data-tag="{{ tag | handle }}" class="color-border-{{ tag | handle }}" data-img="{% if variant.image %}{{ variant.image.src | product_img_url: 'large' }}{% else %}{% endif %}" data-pr_id="{{ pr_variant }}" data-var_id="{{ variant.id }}" data-price="{{ variant.price | money }}">
                {% assign _tag_ = tag | handle | downcase %}
                {% assign _tag_ = "__" | append: _tag_ | append: '__' %}

                <img class="lazyload" data-src="{{ value | handle | append: '.' | append: file_extension | asset_url }}" alt="">

                {% comment %} {% if images_color contains _tag_ %}
                {% assign imagescr = images_color | split: _tag_ | last %}
                {% assign imagescr = imagescr | split: ';' | first %}
                {% assign imagescr = 'filter_color' | append: imagescr | append: '.png' %}
                <img class="lazyload" data-src="{{ imagescr | asset_url }}" alt="">
                {% else %}
                <span class="swatch-label color-{{ tag | handle }}"></span>
                {% endif %} {% endcomment %}

              </a>
            </li>
            {% endif %}
            {% assign allvariants = allvariants | append: value | append: ';' %}
            {% endfor %}
          </ul>

          {% endif %}

          {% if sizeindex > -1 %}
          <ul class="options-swatch options-swatch--size productitem-size-js">
            {% for variant in product.variants %}
            {%- include 'bold-variant' with variant, hide_action: 'skip' -%}
            {% unless variant.available %}{% continue %}{% endunless %}
            {% if colorindex > -1 %}{% assign color = variant.options[colorindex] | remove: csp_flag_string %}{% endif %}
            {% assign tag = variant.options[sizeindex] | remove: csp_flag_string %}
            <li class="{{ color | handle }}-js"{% if colorindex > -1 %} style="display:none;"{% endif %}>
              <a href="#" data-pr_id="{{ pr_variant }}" data-img="{% if variant.image %}{{ variant.image.src | product_img_url: 'large' }}{% else %}{% endif %}" data-var_id="{{ variant.id }}" data-price="{{ variant.price | money }}">{{ tag }}</a>
            </li>
            {% endfor %}
          </ul>
          {% endif %}

          {% endif %}
          <!--variant options -->
        {% endif %}
        <div class="product__inside__info__btns">
          {% if product.handle == 'elbow-sleeves-5mm' or product.handle == 'knee-compression-sleeves' or product.handle == 'ankle-compression-sleeves' or product.handle == 'weightlifting-shoes-venja' or product.handle == 'kinesiology-tape-primetape' or product.handle == 'chalk-ball' or product.handle == 'knee-sleeves-7mm' or product.handle == 'weightlifting-gloves-with-wrist-support' %}
          	{% if settings.product_item_show_cart %}<a {% if func == "" %}{% if settings.product_item_showqv %}href="javascript:void(0);" onclick="quiqview('{{ product.handle | handleize }}')"{% else %}href="{{ product.url | within: collection }}"{% endif %}{% else %}href="javascript:void(0);" onclick="{{ func }}; return false;"{% endif %} class="btn btn--ys btn--xl addtocart-js">{% if func == "" %}{{ 'products.product.select_options_html' | t }}{% else %}{{ 'products.product.add_to_cart_html' | t }}{% endif %}</a>{% endif %}
          {% else %}
          	{% if settings.product_item_show_cart %}<a {% if func == "" %}href="{{ product.url | within: collection }}"{% else %}href="javascript:void(0);" onclick="{{ func }}; return false;"{% endif %} class="btn btn--ys btn--xl addtocart-js">{% if func == "" %}{{ 'products.product.select_options_html' | t }}{% else %}{{ 'products.product.add_to_cart_html' | t }}{% endif %}</a>{% endif %}
            {% comment %}{% if settings.product_item_show_cart %}<a {% if func == "" %}{% if settings.product_item_showqv %}href="#" onclick="quiqview('{{ product.handle | handleize }}')"{% else %}href="{{ product.url | within: collection }}"{% endif %}{% else %}href="#" onclick="{{ func }}; return false;"{% endif %} class="btn btn--ys btn--xl addtocart-js">{% if func == "" %}{{ 'products.product.select_options_html' | t }}{% else %}{{ 'products.product.add_to_cart_html' | t }}{% endif %}</a>{% endif %}{% endcomment %}
            {% if settings.product_item_show_wishlist %}{% if shop.customer_accounts_enabled or settings.product_item_show_wishlist_temporary %}{% include "wishlist-product" button: true %}{% endif %}{% endif %}
            {% comment %}{% if settings.product_item_showqv %}<a href="javascript:void(0);" onclick="quiqview('{{ product.handle | handleize }}')" class="btn btn--ys btn--xl  row-mode-visible hidden-xs"><span class="icon icon-visibility"></span> {{ "products.general.quick_view" | t }}</a>{% endif %}{% endcomment %}
          {% endif %}
        </div>

        <div class="custom__info__link hidden-xs">{% if settings.product_item_show_wishlist %}{% if shop.customer_accounts_enabled or settings.product_item_show_wishlist_temporary %}{% include "wishlist-product" %}{% endif %}{% endif %}</div>
        {% endif %}
      </div>
      <!-- /product info --> 
      <!-- product rating -->
      <div class="rating row-mode-hide">{% if settings.product_item_show_rating %}<span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>{% endif %}</div>
      <!-- /product rating -->
    </div>
  </div>
</div>
<!-- /product -->

{% assign productCount = productCount | plus: 1 %}