{%- assign blog = blogs[section.settings.blog] -%} {%- if section.settings.image
!= blank -%}{%- assign img_url = section.settings.image | img_url: '2048x2048'
-%} {%- else -%}{%- assign img_url = 'layout9_image1.jpg' | asset_url -%} {%-
endif -%} {% assign products_in_row = section.settings.products_in_row | plus: 0
%} {% assign featuredBlogs = 'fitness,diet,weightlifting,news-1' | split:',' %}
{% assign featuredArticles = false %} {% for featuredBlog in featuredBlogs %} {%
if blogs[featuredBlog].articles %} {% if featuredArticles %} {% assign
featuredArticles = featuredArticles | concat:blogs[featuredBlog].articles %} {%
else %} {% assign featuredArticles = blogs[featuredBlog].articles %} {% endif %}
{% endif %} {% endfor %}

<!-- recent-posts-carousel -->
<section
  class="content{% if section.settings.showbgimage %} carusel--parallax layout10{% endif %}"
  {%
  if
  section.settings.showbgimage
  %}
  style="background-image: url({{ img_url }})"
  {%
  endif
  %}
  data-section-id="{{ section.id }}"
  data-section-type="blogslider-section"
>
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <!-- title -->
        <div class="title-with-button">
          <div class="carousel-products__button pull-right">
            <span class="btn-prev"></span>
            <span class="btn-next"></span>
          </div>
          <h1 class="text-center text-uppercase title-under">
            {{ section.settings.title }}
          </h1>
        </div>
        <!-- /title -->
        {% unless blog.empty? %}
        <!-- carousel-new -->
        <div
          class="carousel-products test-here row postscarousel-js-{{
            section.id
          }}"
          id="postsCarousel"
          data-autoplay="{{ section.settings.module_autoplay }}"
          data-speed="{{ section.settings.delay_time }}"
          data-step="{{ section.settings.step }}"
          data-showproducts="{{ section.settings.products_in_row }}"
        >
          {% if featuredArticles %} {% assign featuredArticles =
          featuredArticles | sort:'published_at' | reverse %} {% for article in
          featuredArticles limit: section.settings.post_limit %} {% if
          article.comments.size > 0 %}{% assign comment_url = article.url |
          append: '#comments' %}{% else %}{% assign comment_url = article.url |
          append: '#addcomment' %}{% endif %}
          <!-- slide-->
          <div
            class="col-sm-3 {% if products_in_row < 3 %}col-xl-6{% else %}col-xl-12{% endif %}"
          >
            <!--  -->
            <div class="recent-post-box">
              {% if article.image != blank %}
              <div
                class="col-lg-12 {% if products_in_row < 3 %}col-xl-6{% else %}col-xl-12{% endif %}"
              >
                <a href="{{ article.url }}"
                  ><span class="figure">
                    <img
                      class="lazyload"
                      data-src="{{ article.image.src | img_url: '560x560' }}"
                      alt="{{ article.image.alt }}"
                    />
                    {% if section.settings.blog_show_date %}<span
                      class="figcaption label-top-left"
                      ><span
                        ><b>{{ article.published_at | date: "%d" }}</b
                        ><em>{{
                          article.published_at | date: "%b" | downcase
                        }}</em></span
                      ></span
                    ></span
                  >{% endif %}
                </a>
              </div>
              {% endif %}
              <div
                class="col-lg-12 {% if products_in_row < 3 %}col-xl-6{% else %}col-xl-12{% endif %}"
              >
                <div class="recent-post-box__text">
                  <h4>
                    <a href="{{ article.url }}">{{ article.title }}</a>
                  </h4>
                  {% if section.settings.blog_show_author %}
                  <div class="author">
                    {{
                      "blogs.general.author_by_html" | t: author:article.author
                    }}
                  </div>
                  {% endif %}
                  <p>
                    {% if article.excerpt.size > 0 %}{{ article.excerpt }}{%
                    else %}{{ article.content | strip_html | truncatewords: section.settings.truncate, section.settings.truncate_last_symbols



                    }}{% endif %}
                  </p>
                  {% if section.settings.show_comments %}{% if
                  blog.comments_enabled? %}<a
                    class="link-commet"
                    href="{{ comment_url }}"
                    ><span class="icon icon-message"></span
                    ><span class="number">{{ article.comments.size }}</span>
                    {{ "blogs.general.comment" | t }}</a
                  >{% endif %}{% endif %}
                </div>
              </div>
            </div>
            <!-- / -->
          </div>
          <!-- /slide -->
          {% endfor %} {% endif %}
        </div>
        <div class="row text-center">
          <a href="/pages/blog" id="moreBlog" class="btn btn--ys btn--xl hidden"
            >View More Articles</a
          >
        </div>
        <!-- /carousel-new -->
        {% else %}
        <span style="display: flex; justify-content: center"
          >This section doesnâ€™t currently include any content. Add content to
          this section using the sidebar.</span
        >
        {% endunless %}
      </div>
    </div>
  </div>
</section>
<!-- /recent-posts-carousel -->
{% if products_in_row > 2 %}
<style>
  @media (min-width: 1770px) {
    [data-section-id~="{{ section.id }}"] .recent-post-box p {
      padding-right: 15px;
    }
    [data-section-id~="{{ section.id }}"] .recent-post-box > div:last-child {
      padding-left: 0 !important;
    }
  }
</style>
{% endif %}
